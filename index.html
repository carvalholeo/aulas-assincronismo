<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assincronismo</title>
</head>
<body>
  <p id="livro"></p>
  <script>
    function biblioteca(livro, alface, salada) {
      alface(livro, salada);
    }

    function renderiza(alguma_coisa, callback_normal) {
      document.getElementById('livro').innerText = alguma_coisa;
      callback_normal(alguma_coisa)
    }

    function renderizaComFundoVermelho(argumento_preferido, maromba_academia) {
      const elemento = document.getElementById('livro');
      elemento.style.color = 'white'
      elemento.style.backgroundColor ='red'
      elemento.innerText = argumento_preferido
      maromba_academia(argumento_preferido)
    }

    biblioteca('Dicionário Oxford Escolar', function(primeiro, ultimo = function(outro_argumento) {
      console.log(outro_argumento)
    }) {
      document.getElementById('livro').innerText = primeiro;
      ultimo(primeiro)
    });




    // const minhaPromessa = new Promise(function(resolve, reject){
    //   if (false) {
    //     alert('deu certo')
    //     resolve('deu bom');
    //   } else {
    //     alert('deu merda')
    //     reject('deu ruim aqui')
    //   }
    // })

    function promessa(parametro_config, tempo) {
      return new Promise(function(resolve, reject){
      if (parametro_config && tempo <= 2000) {
        console.log('entrou no if')
        setTimeout(() => resolve('configuração resolvida'), tempo)
      } else {
        alert('deu merda')
        reject('deu ruim aqui')
      }
    });
    }

    const promessa2 = function() {
      return new Promise(function(resolve, reject){
      if (false) {
        alert('deu certo')
        resolve('deu bom');
      } else {
        alert('deu merda')
        reject('deu ruim aqui')
      }
    })
    }

    promessa(true, 1500)
      .then(response => console.log(response))
      .catch(error => console.log(error));

    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://api.guthib.com/users/carvalholeo');
    xhr.addEventListener('readystatechange', (ev) => {
      if (xhr.status === 200) {
        console.log(JSON.parse(xhr.responseText));
      }
    });
    xhr.addEventListener('error', () => {
      alert('problema ao consultar api')
    })
    // xhr.send();

    fetch('https://viacep.com.br/ws/29050660/json')
      .then(response => {
        return response.json()
      })
      .then(console.log)
      .catch(console.trace)








  </script>
</body>
</html>